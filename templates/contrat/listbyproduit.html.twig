{% extends 'base.html.twig' %}

{% block body %}
{% set nbCols = 1 %}
<h1>{{ titre }} : liste des produits </h1>
<table class="table-bordered table-condensed" >
  <thead>
    <tr>
    {% for i in 1..nbCols %}
        {% if i > 1 %}
        <td>&nbsp;</td>
        {% endif %}
      <th align="center"">Produit</th>
      <th align="center"">Nombre</th>
     {% endfor %}
    </tr>
  </thead>
  <tbody>
 {% set totalProduits = 0 %}
 {% set i = 0 %}
 {% for nomProduit, produitCount in produits %}
 {% if i == 0 %}
    <tr>
    {% else %}
    <td>&nbsp;</td>
 {% endif %}
      <td> {{ nomProduit }} </td>
      <td align="center"> {{ produitCount }} </td>
 {% set totalProduits = totalProduits + produitCount %}
 {% set i = i + 1 %}
 {% if i == nbCols %}
    </tr>
    {% set i = 0 %}
 {% endif %}
 {% endfor %} 
 {% if i != 0 %}
 </tr>
 {% endif %}
 <tr>
   <td align="center">
     Nombre total de paquets
   </td>
   <td align="center">
     {{ totalProduits }}
   </td>
 </tr>
 </tbody>
</table>

{% endblock %} 
